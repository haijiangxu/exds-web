

### 客户档案的核心状态 (The Customer Lifecycle)

建议您至少设置以下五种核心状态，它们彼此互斥，构成一个完整的业务闭环：

#### 1. 意向客户 (Intention / Prospect)
* **功能说明：**
    * 这是客户的“0”状态。代表销售/市场团队已经录入该客户的基本信息（如名称、行业、大致用电量），但双方**尚未签订**正式的售电合同。

* **对决策系统的影响：**
    * **负荷预测：** **不计入**。该客户不参与任何常规的负荷预测。
    * **交易决策：** **不计入**。
    * **风险管理：** （高级功能）可用于“What-if”情景分析，例如：“如果我们签下这个客户，我们的总负荷曲线和风险敞口会如何变化？”

#### 2. 待生效 (Pending Activation)
* **功能说明：**
    * 双方已经**正式签约**，但在合同约定的服务**开始日期之前**。例如，11月10日签约，约定服务从次年1月1日开始，那么在11月10日至12月31日期间，该客户即为“待生效”状态。
* **对决策系统的影响：**
    * **负荷预测：** **部分计入**。系统**不得**将其计入D-1, D-2等短期负荷预测，但**必须**将其计入服务开始日期之后的中长期（如月度）负荷预测。
    * **交易决策：** 需计入月度交易策略（例如，在12月申报1月的电量时，必须包含这个客户）。
    * **系统动作：** 当系统日期达到合同“生效日期”时，应自动（或提示管理员）将状态切换为“执行中”。

#### 3. 执行中 (Executing / Active)
* **功能说明：**
    * 这是客户的**核心活跃状态**。代表合同在有效期内，售电公司正在（或有义务）为其提供代理购电服务。
* **对决策系统的影响：**
    * **负荷预测：** **完全计入**。这是所有短期、中长期负荷预测的核心对象。
    * **交易决策：** **完全计入**。必须为该客户的电量进行交易申报。
    * **结算管理：** **完全计入**。必须对该客户进行电费结算和利润核算。

#### 4. 已暂停 (Suspended)
* **功能说明：**
    * 一种临时的“冻结”状态。代表在合同期内，由于特定原因（如客户长期停产检修、客户严重违约欠费），双方协商一致或按合同约定**暂时中止**了代理购电服务。
* **对决策系统的影响：**
    * **负荷预测：** **立即剔除**。系统在预测时应将此客户负荷视为0（或按约定值），直到状态恢复为“执行中”。
    * **交易决策：** **立即剔除**。
    * **风险管理：** 这是一个**高风险信号**，应在风险监控模块中高亮告警，提示交易员立即调整总负荷预测和交易策略，避免产生巨额偏差。

#### 5. 已终止 (Terminated / Expired)
* **功能说明：**
    * 客户的“终点”状态。代表合同已到期且**未续约**，或因故**提前解约**。该客户已流失或转由其他方式购电。
* **对决策系统的影响：**
    * **负荷预测：** **完全剔除**。不得计入任何未来的负荷预测。
    * **交易决策：** **完全剔除**。
    * **数据保留：** **必须保留**其完整的历史数据。这些数据对于客户聚类分析、预测模型优化、复盘流失原因等仍具有极高价值。

---

### 状态流转示意

这个流程清晰地定义了客户在系统中的生命周期：

`意向客户` → (签约) → `待生效` → (合同开始) → `执行中`

`执行中` → (临时中止) → `已暂停` → (恢复服务) → `执行中`

`执行中` → (合同到期/解约) → `已终止`




-----

### “增” (Create) 操作

  * **“增” (Create) 是所有状态的起点。**
  * 在系统中点击“新增客户”按钮时，创建的客户记录**默认状态**应为 **“意向客户”**。

-----

### 各状态下的“查、改、删、业务操作”

这里使用一个表格来说明，会更加清晰：

| 客户状态 | 查 (Read) | 改 (Update/Edit) | 删 (Delete) | 核心业务操作 (Actions) |
| :--- | :--- | :--- | :--- | :--- |
| **1. 意向客户**<br>(Prospect) | **可查看** | **[完全可编辑]**<br>此状态为“草稿”状态。所有信息（名称、行业、联系人、预估电量等）均可自由修改。 | **[可删除]**<br>如果该商机作废或录入错误，允许**物理删除**。这是唯一可以被删除的状态。 | **[操作：签约]**<br>**功能：** 直接调用零售合同管理模块的新增功能，客户名称锁定该客户，合同保存后，状态变为 **“待生效”**。 |
| **2. 待生效**<br>(Pending) | **可查看** | **[有限编辑]**<br>- **可修改：** 联系人、备注等非核心信息。<br>- **锁定：** 合同条款、生效日期、电价套餐、用电户号等**核心业务信息**。 | **[不可删除]**<br>已签约客户（即使未生效）是法律和业务资产，**严禁删除**。 | **[操作：撤销]**<br>**功能：** 如在生效前毁约，可执行“撤销”操作，状态变为 **“已终止”**（并记录原因）。 |
| **3. 执行中**<br>(Active) | **可查看**<br>(所有下游模块的核心数据源) | **[严格受控]**<br>- **可修改：** 客户经理、联系人等辅助信息。<br>- **锁定：** **所有**用电、合同、结算相关字段。 | **[严禁删除]**<br>**绝对禁止**删除，这是系统的核心活跃数据。 | **[操作：暂停]** → 状态变为“已暂停”<br>**[操作：终止]** → 状态变为“已终止” |
| **4. 已暂停**<br>(Suspended) | **可查看**<br>(需在总览页高亮告警) | **[严格受控]**<br>(同“执行中”)<br>锁定所有业务字段，仅允许修改备注、联系人等。 | **[严禁删除]**<br>只是临时状态，严禁删除。 | **[操作：恢复]**<br>**功能：** 客户恢复用电，状态改回 **“执行中”**。<br>**[操作：终止]** → 状态变为“已终止” |
| **5. 已终止**<br>(Terminated) | **可查看**<br>(作为历史数据) | **[完全锁定/只读]**<br>**严禁修改**任何信息。必须保证历史记录的完整性和严肃性，以供后续复盘和审计。 | **[严禁删除]**<br>(可提供\*\*“归档”**功能，即在列表页隐藏，但数据**严禁\*\*从数据库中物理删除)。 | **[操作：重签]**<br>**功能：** 不应在原记录上修改。应触发“新建”客户流程（或复制为新客户），生成一条新的“待生效”记录。 |

### 总结

1.  **“增” (Create)：** 只发生在最开始，创建一条 **“意向客户”** 记录。
2.  **“删” (Delete)：** 只有 **“意向客户”** 才能被物理删除。其他所有状态（尤其是“已终止”）都**严禁删除**，以保留完整的业务和数据链条，最多只能提供“归档”（隐藏）功能。
3.  **“改” (Update)：** 权限是**状态相关**的。客户一旦签约（进入“待生效”），其核心业务字段（户号、电压、合同、套餐）就应被锁定，任何修改都应通过严肃的“合同变更”流程，而不是简单的“编辑”按钮。
4.  **“查” (Read)：** 所有状态都允许被查看，但“已终止”和“已暂停”的客户，应在前端界面上有明显标识（如置灰、加标签）。

### 总结

您在客户档案管理中设置的 `Status` (状态) 字段，将成为整个系统中最重要的**业务逻辑触发器 (Business Logic Trigger)** 之一。它会驱动所有下游模块的数据筛选和计算逻辑。